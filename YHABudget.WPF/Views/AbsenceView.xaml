<UserControl x:Class="YHABudget.WPF.Views.AbsenceView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="600"
             d:DesignWidth="1000"
             Background="{StaticResource BackgroundLightBrush}">
    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0"
                   Text="FrÃ¥nvaro"
                   Style="{StaticResource SectionHeaderStyle}"/>

        <!-- Month Selector -->
        <Border Grid.Row="1"
                Style="{StaticResource CardStyle}"
                Margin="0,20,0,20">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="MÃ¥nad:"
                           VerticalAlignment="Center"
                           FontSize="14"
                           Margin="0,0,10,0"/>
                <DatePicker SelectedDate="{Binding SelectedMonth, Mode=TwoWay}"
                            DisplayDateStart="2020-01-01"
                            DisplayDateEnd="2030-12-31"
                            Width="150"
                            Margin="0,0,20,0"/>
                <Button Content="+ LÃ¤gg till frÃ¥nvaro"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Command="{Binding AddAbsenceCommand}"
                        HorizontalAlignment="Left"/>
            </StackPanel>
        </Border>

        <!-- Absence List -->
        <Border Grid.Row="2"
                Style="{StaticResource CardStyle}">
            <ScrollViewer VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled">
                <DataGrid ItemsSource="{Binding Absences}"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          CanUserDeleteRows="False"
                          IsReadOnly="True"
                          GridLinesVisibility="None"
                          Background="Transparent"
                          BorderThickness="0"
                          HeadersVisibility="Column"
                          SelectionMode="Single"
                          RowHeight="50"
                          RowStyle="{StaticResource StandardDataGridRowStyle}"
                          CellStyle="{StaticResource StandardDataGridCellStyle}"
                          ColumnHeaderStyle="{StaticResource StandardDataGridColumnHeaderStyle}">

                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Datum"
                                            Binding="{Binding Date, StringFormat=yyyy-MM-dd}"
                                            Width="*"/>
                        <DataGridTextColumn Header="Typ"
                                            Binding="{Binding Type}"
                                            Width="*"/>
                        <DataGridTextColumn Header="Dagsinkomst"
                                            Binding="{Binding DailyIncome, StringFormat=N0}"
                                            Width="*"/>
                        <DataGridTextColumn Header="Avdrag"
                                            Binding="{Binding Deduction, StringFormat=N0}"
                                            Width="*">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Foreground"
                                            Value="{StaticResource ExpenseBrush}"/>
                                    <Setter Property="FontWeight"
                                            Value="SemiBold"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="ErsÃ¤ttning"
                                            Binding="{Binding Compensation, StringFormat=N0}"
                                            Width="*">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Foreground"
                                            Value="{StaticResource IncomeBrush}"/>
                                    <Setter Property="FontWeight"
                                            Value="SemiBold"/>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="Anteckning"
                                            Binding="{Binding Note}"
                                            Width="2*"/>
                        <DataGridTemplateColumn Header="Ã…tgÃ¤rder"
                                                Width="100">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal"
                                                HorizontalAlignment="Center">
                                        <Button Command="{Binding DataContext.EditAbsenceCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                CommandParameter="{Binding}"
                                                Style="{StaticResource IconButtonStyle}"
                                                ToolTip="Redigera"
                                                Margin="0,0,8,0">
                                            <TextBlock Text="âœï¸"
                                                       FontSize="16"/>
                                        </Button>
                                        <Button Command="{Binding DataContext.DeleteAbsenceCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                CommandParameter="{Binding}"
                                                Style="{StaticResource IconButtonDangerStyle}"
                                                ToolTip="Ta bort">
                                            <TextBlock Text="ðŸ—‘ï¸"
                                                       FontSize="16"/>
                                        </Button>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </ScrollViewer>
        </Border>
    </Grid>
</UserControl>
